!function(){"use strict";const e={currentMethod:null,formValidation:{},cart:[],cartTotal:0,init(){this.loadCartData(),this.bindEvents(),this.initCardValidation(),this.initCopyFunctionality(),this.updateCartSummary(),this.updateCashMode()},loadCartData(){const e=localStorage.getItem("cart"),t=localStorage.getItem("cart_total");e&&(this.cart=JSON.parse(e)),t&&(this.cartTotal=parseFloat(t)),console.log("Cart loaded:",this.cart,"Total:",this.cartTotal)},updateCartSummary(){const e=document.getElementById("cart-summary");if(e&&this.cart.length>0){let t="<h4>Resumen del Pedido</h4>";this.cart.forEach(e=>{t+=`\n                        <div class="cart-item">\n                            <span>${e.name} (x${e.quantity})</span>\n                            <span>$${(e.price*e.quantity).toLocaleString("es-AR")}</span>\n                        </div>\n                    `}),t+=`\n                    <div class="cart-total">\n                        <strong>Total: $${this.cartTotal.toLocaleString("es-AR")} ARS</strong>\n                    </div>\n                `,e.innerHTML=t}},bindEvents(){document.querySelectorAll('input[name="payment"]').forEach(e=>{e.addEventListener("change",e=>{this.handlePaymentMethodChange(e.target.value)})}),document.querySelectorAll('input[name="mp-method"]').forEach(e=>{e.addEventListener("change",e=>{this.handleMercadoPagoMethodChange(e.target.value)})}),document.querySelectorAll(".copy-btn").forEach(e=>{e.addEventListener("click",e=>{this.copyToClipboard(e.target.dataset.target)})});const e=document.getElementById("installments");e&&e.addEventListener("change",e=>{const t=Math.min(12,Math.max(1,parseInt(e.target.value||"1")));e.target.value=String(t),this.updateInstallmentInfo(e.target.value)}),document.querySelectorAll('input[name="shipping"]').forEach(e=>{e.addEventListener("change",()=>this.updateCashMode())})},handlePaymentMethodChange(e){switch(this.currentMethod=e,document.querySelectorAll(".payment-form").forEach(e=>{e.classList.add("hidden")}),e){case"mercadopago":document.getElementById("mercadopagoForm").classList.remove("hidden");break;case"card":document.getElementById("cardForm").classList.remove("hidden");break;case"cash":document.getElementById("cashInfo").classList.remove("hidden"),this.updateCashMode();break;case"transfer":document.getElementById("transferInfo").classList.remove("hidden")}this.updateSummary()},updateCashMode(){const e=document.querySelector('input[name="shipping"][value="pickup"]')?.checked,t=document.querySelector('input[name="shipping"][value="delivery"]')?.checked,n=document.getElementById("cashPickup"),a=document.getElementById("cashDelivery"),o=document.getElementById("cashDescription"),s=document.getElementById("cashBenefits"),i=document.getElementById("shippingAddress");if(o&&s&&(e?(o.textContent="Pago en el local al retirar",s.innerHTML='\n                        <span class="benefit">‚úì Sin comisiones</span>\n                        <span class="benefit">‚úì Retiro inmediato</span>\n                    '):t?(o.textContent="RapiPago, PagoF√°cil √∫nicamente",s.innerHTML='\n                        <span class="benefit">‚úì Sin comisiones</span>\n                        <span class="benefit">‚úì 48hs para pagar</span>\n                    '):(o.textContent="RapiPago, PagoF√°cil, Pago Mis Cuentas",s.innerHTML='\n                        <span class="benefit">‚úì Sin comisiones</span>\n                        <span class="benefit">‚úì 48hs para pagar</span>\n                    ')),n&&a&&(e?(n.classList.remove("hidden"),a.classList.add("hidden")):t?(a.classList.remove("hidden"),n.classList.add("hidden")):(n.classList.add("hidden"),a.classList.add("hidden"))),i)if(t)i.classList.remove("hidden");else{i.classList.add("hidden");i.querySelectorAll("input").forEach(e=>e.value="")}},handleMercadoPagoMethodChange(e){console.log("Mercado Pago method selected:",e)},initCardValidation(){const e=document.getElementById("cardNumber"),t=document.getElementById("cardExpiry"),n=document.getElementById("cardCVC");e&&e.addEventListener("input",e=>{this.formatCardNumber(e.target),this.detectCardType(e.target.value)}),t&&t.addEventListener("input",e=>{this.formatCardExpiry(e.target)}),n&&n.addEventListener("input",e=>{this.validateCVC(e.target)})},formatCardNumber(e){let t=e.value.replace(/\s/g,"").replace(/[^0-9]/gi,""),n=t.match(/.{1,4}/g)?.join(" ")||t;e.value=n},formatCardExpiry(e){let t=e.value.replace(/\D/g,"");t.length>=2&&(t=t.substring(0,2)+"/"+t.substring(2,4)),e.value=t},detectCardType(e){const t=document.getElementById("cardType");if(!t)return;const n=e.replace(/\s/g,"");/^4/.test(n)?t.innerHTML="üí≥ Visa":/^5[1-5]/.test(n)?t.innerHTML="üí≥ Mastercard":/^3[47]/.test(n)?t.innerHTML="üí≥ American Express":t.innerHTML=""},validateCVC(e){const t=e.value.replace(/[^0-9]/g,"");e.value=t,t.length>=3?e.classList.add("valid"):e.classList.remove("valid")},initCopyFunctionality(){document.querySelectorAll(".copyable").forEach(e=>{e.addEventListener("click",()=>{this.copyToClipboard(e.dataset.copy)})})},copyToClipboard(e){if(navigator.clipboard)navigator.clipboard.writeText(e).then(()=>{this.showCopyNotification("Copiado al portapapeles")});else{const t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),this.showCopyNotification("Copiado al portapapeles")}},showCopyNotification(e){const t=document.createElement("div");t.className="copy-notification",t.textContent=e,t.style.cssText="\n                position: fixed;\n                top: 20px;\n                right: 20px;\n                background: var(--success);\n                color: white;\n                padding: 1rem 1.5rem;\n                border-radius: 8px;\n                z-index: 10000;\n                font-weight: 600;\n                animation: slideInRight 0.3s ease;\n            ",document.body.appendChild(t),setTimeout(()=>{t.style.animation="slideOutRight 0.3s ease",setTimeout(()=>{document.body.removeChild(t)},300)},2e3)},getCurrentTotal(){const e=document.getElementById("summaryTotal");if(e){const t=e.textContent.replace(/[^0-9.,]/g,"");return parseFloat(t.replace(",","."))||0}return 0},updateTotalDisplay(e,t){const n=document.getElementById("summaryTotal");n&&(n.innerHTML=`‚Ç¨${e.toFixed(2)} <small style="color: var(--success); font-size: 0.8rem;">(${t})</small>`)},updateInstallmentInfo(e){const t=document.createElement("div");t.className="installment-info",t.style.cssText="\n                margin-top: 0.5rem;\n                padding: 0.5rem;\n                background: rgba(212, 175, 55, 0.1);\n                border-radius: 4px;\n                font-size: 0.85rem;\n            ";const n=this.getCurrentTotal(),a=n/parseInt(e);if("1"===e)t.innerHTML=`<strong>Pago √∫nico:</strong>$${n.toFixed(2)}`;else if(e<="6")t.innerHTML=`<strong>${e} cuotas sin inter√©s:</strong>$${a.toFixed(2)} por mes`;else{const n=1.15*a;t.innerHTML=`<strong>${e} cuotas con inter√©s:</strong>$${n.toFixed(2)} por mes`}const o=document.querySelector(".installment-info");o&&o.remove();const s=document.getElementById("installments");s&&s.parentNode.appendChild(t)},updateSummary(){console.log("Updating summary for payment method:",this.currentMethod)},validatePaymentForm(){switch(this.currentMethod){case"card":return this.validateCardForm();case"mercadopago":return this.validateMercadoPagoForm();case"cash":case"transfer":case"digital":case"crypto":return!0;default:return!1}},validateCardForm(){const e=document.getElementById("cardNumber"),t=document.getElementById("cardExpiry"),n=document.getElementById("cardCVC"),a=document.getElementById("cardHolder");let o=!0;return e&&this.isValidCardNumber(e.value)||(this.showFieldError(e,"N√∫mero de tarjeta inv√°lido"),o=!1),t&&this.isValidExpiry(t.value)||(this.showFieldError(t,"Fecha de vencimiento inv√°lida"),o=!1),(!n||n.value.length<3)&&(this.showFieldError(n,"C√≥digo de seguridad inv√°lido"),o=!1),(!a||a.value.length<2)&&(this.showFieldError(a,"Nombre del titular requerido"),o=!1),o},validateMercadoPagoForm:()=>!!document.querySelector('input[name="mp-method"]:checked'),isValidCardNumber(e){const t=e.replace(/\s/g,"");return/^\d{13,19}$/.test(t)&&this.luhnCheck(t)},luhnCheck(e){let t=0,n=!1;for(let a=e.length-1;a>=0;a--){let o=parseInt(e.charAt(a));n&&(o*=2,o>9&&(o-=9)),t+=o,n=!n}return t%10==0},isValidExpiry(e){const t=e.match(/^(\d{2})\/(\d{2})$/);if(!t)return!1;const n=parseInt(t[1]),a=parseInt("20"+t[2]),o=new Date,s=o.getFullYear(),i=o.getMonth()+1;return n>=1&&n<=12&&(a>s||a===s&&n>=i)},showFieldError(e,t){e.classList.add("error");const n=e.parentNode.querySelector(".field-error-message");n&&n.remove();const a=document.createElement("div");a.className="field-error-message",a.textContent=t,a.style.cssText="\n                color: var(--danger);\n                font-size: 0.75rem;\n                margin-top: 0.25rem;\n                font-weight: 500;\n            ",e.parentNode.appendChild(a),e.addEventListener("input",()=>{e.classList.remove("error");const t=e.parentNode.querySelector(".field-error-message");t&&t.remove()},{once:!0})},async processPayment(){if(!this.validatePaymentForm())return!1;if(!this.cart||0===this.cart.length)return this.showPaymentError("Tu carrito est√° vac√≠o. Agrega productos antes de proceder al pago."),!1;this.showLoadingState();try{switch(this.currentMethod){case"mercadopago":return await this.processMercadoPago();case"card":return this.processCard();case"cash":return this.processCash();case"transfer":return this.processTransfer();default:return this.showPaymentError("Por favor selecciona un m√©todo de pago"),!1}}catch(e){return console.error("Payment processing error:",e),this.showPaymentError("Error al procesar el pago: "+e.message),!1}finally{this.hideLoadingState()}},showLoadingState(){const e=document.querySelector(".submit-payment");e&&(e.disabled=!0,e.innerHTML="<span>Procesando...</span>")},hideLoadingState(){const e=document.querySelector(".submit-payment");e&&(e.disabled=!1,e.innerHTML="<span>Procesar Pago</span>")},processMercadoPago(){return console.log("Processing Mercado Pago payment..."),this.showPaymentSuccess("Redirigiendo a Mercado Pago..."),!0},async processMercadoPago(){try{const e=this.getCustomerData(),t=this.getPaymentMethodData(),n={items:this.cart.map(e=>({id:e.id||e.name.toLowerCase().replace(/\s+/g,"-"),title:e.name,quantity:e.quantity,price:e.price,currency_id:"ARS"})),customer:e,payment_method:t};console.log("Creating Mercado Pago preference...",n);const a=await fetch("/.netlify/functions/mercadopago-create-preference",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);const o=await a.json();if(localStorage.setItem("cart_total",this.cartTotal.toString()),!o.init_point)throw new Error("No se pudo obtener el enlace de pago");return window.location.href=o.init_point,!0}catch(e){return console.error("Error processing Mercado Pago payment:",e),this.showPaymentError("Error al procesar el pago con Mercado Pago: "+e.message),!1}},getCustomerData:()=>({name:document.getElementById("billing-name")?.value||"",surname:document.getElementById("billing-surname")?.value||"",email:document.getElementById("billing-email")?.value||"",phone:{area_code:"11",number:document.getElementById("billing-phone")?.value||""},identification:{type:"DNI",number:document.getElementById("billing-dni")?.value||""},address:{street:document.getElementById("billing-address")?.value||"",number:parseInt(document.getElementById("billing-number")?.value)||0,zip_code:document.getElementById("billing-zip")?.value||""}}),getPaymentMethodData(){const e=this.currentMethod,t=document.querySelector('input[name="mp-method"]:checked')?.value;let n=parseInt(document.getElementById("installments")?.value)||1;return"debit-card"===t&&(n=1),"credit-card"===t&&(n=Math.min(12,Math.max(1,n))),{type:e,method:t,installments:n}},processCard(){return console.log("Processing card payment..."),this.showPaymentSuccess("Procesando pago con tarjeta..."),!0},processCash(){return console.log("Processing cash payment..."),this.showPaymentSuccess("Generando cup√≥n de pago..."),!0},processTransfer(){return console.log("Processing bank transfer..."),this.showTransferOptions(),!0},showTransferOptions(){const e=document.createElement("div");e.className="transfer-modal",e.innerHTML=`\n                <div class="modal-overlay">\n                    <div class="modal-content">\n                        <div class="modal-header">\n                            <h3>üè¶ Realizar Transferencia</h3>\n                            <button class="close-modal">&times;</button>\n                        </div>\n                        <div class="modal-body">\n                            <div class="bank-data">\n                                <h4>Datos Bancarios</h4>\n                                <div class="bank-info">\n                                    <p><strong>Banco:</strong> Banco Galicia</p>\n                                    <p><strong>CBU:</strong> 0070999830004567890123</p>\n                                    <p><strong>Alias:</strong> IHARA.LONDON.MP</p>\n                                    <p><strong>Titular:</strong> Ihara & London S.A.S</p>\n                                    <p><strong>CUIT:</strong> 30-12345678-9</p>\n                                    <p><strong>Referencia:</strong> ${this.generateOrderReference()}</p>\n                                </div>\n                                <button class="copy-bank-data">üìã Copiar Datos</button>\n                            </div>\n                            \n                            <div class="bank-apps">\n                                <h4>Abrir en tu App Bancaria</h4>\n                                <div class="bank-buttons">\n                                    <button class="bank-btn galicia" onclick="PaymentSystem.openBankApp('galicia')">\n                                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTEyIDJMMTMuMDkgOC4yNkwyMCA5TDEzLjA5IDE1Ljc0TDEyIDIyTDEwLjkxIDE1Ljc0TDQgOUwxMC45MSA4LjI2TDEyIDJaIiBmaWxsPSIjRkY1NzIyIi8+Cjwvc3ZnPgo=" alt="Galicia">\n                                        Banco Galicia\n                                    </button>\n                                    <button class="bank-btn santander" onclick="PaymentSystem.openBankApp('santander')">\n                                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTEyIDJMMTMuMDkgOC4yNkwyMCA5TDEzLjA5IDE1Ljc0TDEyIDIyTDEwLjkxIDE1Ljc0TDQgOUwxMC45MSA4LjI2TDEyIDJaIiBmaWxsPSIjRUMxQzI0Ii8+Cjwvc3ZnPgo=" alt="Santander">\n                                        Banco Santander\n                                    </button>\n                                    <button class="bank-btn bbva" onclick="PaymentSystem.openBankApp('bbva')">\n                                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTEyIDJMMTMuMDkgOC4yNkwyMCA5TDEzLjA5IDE1Ljc0TDEyIDIyTDEwLjkxIDE1Ljc0TDQgOUwxMC45MSA4LjI2TDEyIDJaIiBmaWxsPSIjMDA0ODhBIi8+Cjwvc3ZnPgo=" alt="BBVA">\n                                        Banco BBVA\n                                    </button>\n                                    <button class="bank-btn macro" onclick="PaymentSystem.openBankApp('macro')">\n                                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTEyIDJMMTMuMDkgOC4yNkwyMCA5TDEzLjA5IDE1Ljc0TDEyIDIyTDEwLjkxIDE1Ljc0TDQgOUwxMC45MSA4LjI2TDEyIDJaIiBmaWxsPSIjRkZEMTAwIi8+Cjwvc3ZnPgo=" alt="Macro">\n                                        Banco Macro\n                                    </button>\n                                    <button class="bank-btn icbc" onclick="PaymentSystem.openBankApp('icbc')">\n                                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTEyIDJMMTMuMDkgOC4yNkwyMCA5TDEzLjA5IDE1Ljc0TDEyIDIyTDEwLjkxIDE1Ljc0TDQgOUwxMC45MSA4LjI2TDEyIDJaIiBmaWxsPSIjQzQxRTNBIi8+Cjwvc3ZnPgo=" alt="ICBC">\n                                        Banco ICBC\n                                    </button>\n                                    <button class="bank-btn nacion" onclick="PaymentSystem.openBankApp('nacion')">\n                                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTEyIDJMMTMuMDkgOC4yNkwyMCA5TDEzLjA5IDE1Ljc0TDEyIDIyTDEwLjkxIDE1Ljc0TDQgOUwxMC45MSA4LjI2TDEyIDJaIiBmaWxsPSIjMDA0MEVGIS8+Cjwvc3ZnPgo=" alt="Naci√≥n">\n                                        Banco Naci√≥n\n                                    </button>\n                                </div>\n                            </div>\n                            <div class="instructions">\n                                <h4>üìù Instrucciones</h4>\n                                <ol>\n                                    <li>Copia los datos bancarios o abre tu app</li>\n                                    <li>Transfiere el monto exacto: <strong>$${this.cartTotal.toLocaleString("es-AR")}</strong></li>\n                                    <li>Incluye la referencia en el concepto</li>\n                                    <li>Env√≠a el comprobante por WhatsApp</li>\n                                </ol>\n                                <a href="https://wa.me/5491123456789?text=Hola! Realic√© una transferencia por mi pedido. Referencia: ${this.generateOrderReference()}" \n                                   class="whatsapp-btn" target="_blank">\n                                    üì± Enviar Comprobante por WhatsApp\n                                </a>\n                            </div>\n                        </div>\n                        <div class="modal-footer">\n                            <button class="btn-secondary close-modal">Cancelar</button>\n                            <button class="btn-primary confirm-transfer">Confirmar Transferencia</button>\n                        </div>\n                    </div>\n                </div>\n            `,document.body.appendChild(e),this.bindTransferModalEvents(e)},generateOrderReference:()=>`IH${Date.now().toString().slice(-6)}${Math.random().toString(36).substr(2,3).toUpperCase()}`,bindTransferModalEvents(e){e.querySelectorAll(".close-modal").forEach(t=>{t.addEventListener("click",()=>{e.remove()})}),e.querySelector(".copy-bank-data").addEventListener("click",()=>{this.copyBankData()}),e.querySelector(".confirm-transfer").addEventListener("click",()=>{this.confirmTransfer(),e.remove()}),e.querySelector(".modal-overlay").addEventListener("click",t=>{t.target===t.currentTarget&&e.remove()})},copyBankData(){const e=this.generateOrderReference(),t=`Banco Galicia\nCBU: 0070999830004567890123\nAlias: IHARA.LONDON.MP\nTitular: Ihara & London S.A.S\nCUIT: 30-12345678-9\nMonto: $${this.cartTotal.toLocaleString("es-AR")} ARS\nReferencia: ${e}`;navigator.clipboard.writeText(t).then(()=>{this.showNotification("‚úÖ Datos bancarios copiados al portapapeles")}).catch(()=>{this.showNotification("‚ùå Error al copiar. Anota los datos manualmente.")})},openBankApp(e){const t=this.cartTotal,n=this.generateOrderReference(),a="0070999830004567890123",o={galicia:{deep:`galicia://transfer?cbu=${a}&amount=${t}&concept=${n}`,fallback:"https://play.google.com/store/apps/details?id=ar.com.galicia.bancagalicia"},santander:{deep:`santander://transfer?cbu=${a}&amount=${t}&concept=${n}`,fallback:"https://play.google.com/store/apps/details?id=com.santander.app"},bbva:{deep:`bbva://transfer?cbu=${a}&amount=${t}&concept=${n}`,fallback:"https://play.google.com/store/apps/details?id=com.bbva.bbvanet"},macro:{deep:`macro://transfer?cbu=${a}&amount=${t}&concept=${n}`,fallback:"https://play.google.com/store/apps/details?id=ar.com.macro.bancamacro"},icbc:{deep:`icbc://transfer?cbu=${a}&amount=${t}&concept=${n}`,fallback:"https://play.google.com/store/apps/details?id=ar.com.icbc.bancaicbc"},nacion:{deep:`nacion://transfer?cbu=${a}&amount=${t}&concept=${n}`,fallback:"https://play.google.com/store/apps/details?id=ar.gov.nacion.bna"}}[e];if(o){const t=document.createElement("a");t.href=o.deep,t.click(),setTimeout(()=>{this.showAppFallback(e,o.fallback)},2e3)}},openWalletApp(e){const t=.9*this.cartTotal,n=this.generateOrderReference(),a="0070999830004567890123",o={mercadopago:{deep:`mercadopago://transfer?cbu=${a}&amount=${t}&concept=${n}`,fallback:"https://play.google.com/store/apps/details?id=com.mercadopago.wallet"},uala:{deep:`uala://transfer?cbu=${a}&amount=${t}&concept=${n}`,fallback:"https://play.google.com/store/apps/details?id=com.uala.app"},brubank:{deep:`brubank://transfer?cbu=${a}&amount=${t}&concept=${n}`,fallback:"https://play.google.com/store/apps/details?id=ar.com.brubank.app"}}[e];if(o){const t=document.createElement("a");t.href=o.deep,t.click(),setTimeout(()=>{this.showAppFallback(e,o.fallback)},2e3)}},showAppFallback(e,t){const n=document.createElement("div");n.className="app-fallback",n.innerHTML=`\n                <div style="position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); \n                            background: white; padding: 2rem; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.3); \n                            z-index: 10000; max-width: 400px; text-align: center;">\n                    <h3>¬øNo se abri√≥ la app?</h3>\n                    <p>Si no tienes la app de ${e} instalada, puedes descargarla:</p>\n                    <a href="${t}" target="_blank" class="btn-primary" style="display: inline-block; margin: 1rem 0;">\n                        üì± Descargar App\n                    </a>\n                    <br>\n                    <button onclick="this.parentElement.parentElement.remove()" class="btn-secondary">\n                        Cerrar\n                    </button>\n                </div>\n            `,document.body.appendChild(n),setTimeout(()=>{n.parentElement&&n.remove()},5e3)},confirmTransfer(){const e={reference:this.generateOrderReference(),amount:this.cartTotal,items:this.cart,method:"transfer",timestamp:(new Date).toISOString()};localStorage.setItem("pending_order",JSON.stringify(e)),this.showPaymentSuccess("‚úÖ Transferencia registrada. Te contactaremos cuando confirmemos el pago.")},showNotification(e){const t=document.createElement("div");t.className="payment-notification",t.innerHTML=`\n                <div style="position: fixed; top: 20px; right: 20px; background: #10b981; color: white; \n                            padding: 1rem 1.5rem; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.2); \n                            z-index: 10001; animation: slideIn 0.3s ease;">\n                    ${e}\n                </div>\n            `,document.body.appendChild(t),setTimeout(()=>{t.remove()},3e3)},processDigitalWallet(){return console.log("Processing digital wallet payment..."),this.showDigitalWalletOptions(),!0},showDigitalWalletOptions(){const e=document.createElement("div");e.className="wallet-modal",e.innerHTML=`\n                <div class="modal-overlay">\n                    <div class="modal-content">\n                        <div class="modal-header">\n                            <h3>üí≥ Seleccionar Billetera Digital</h3>\n                            <button class="close-modal">&times;</button>\n                        </div>\n                        <div class="modal-body">\n                            <div class="wallet-options">\n                                <div class="wallet-option" onclick="PaymentSystem.selectWallet('mercadopago')">\n                                    <div class="wallet-logo">üíô</div>\n                                    <div class="wallet-info">\n                                        <h4>Mercado Pago</h4>\n                                        <p>La billetera m√°s popular de Argentina</p>\n                                        <div class="wallet-features">\n                                            <span>‚úì Pago inmediato</span>\n                                            <span>‚úì Protecci√≥n del comprador</span>\n                                            <span>‚úì QR Code</span>\n                                        </div>\n                                    </div>\n                                    <div class="wallet-amount">\n                                        $${this.cartTotal.toLocaleString("es-AR")} ARS\n                                    </div>\n                                </div>\n                                \n                                <div class="wallet-option" onclick="PaymentSystem.selectWallet('uala')">\n                                    <div class="wallet-logo">üíú</div>\n                                    <div class="wallet-info">\n                                        <h4>Ual√°</h4>\n                                        <p>Billetera digital y tarjeta prepaga</p>\n                                        <div class="wallet-features">\n                                            <span>‚úì Sin comisiones</span>\n                                            <span>‚úì Transferencias gratuitas</span>\n                                            <span>‚úì Cashback</span>\n                                        </div>\n                                    </div>\n                                    <div class="wallet-amount">\n                                        $${this.cartTotal.toLocaleString("es-AR")} ARS\n                                    </div>\n                                </div>\n                                \n                                <div class="wallet-option" onclick="PaymentSystem.selectWallet('brubank')">\n                                    <div class="wallet-logo">üñ§</div>\n                                    <div class="wallet-info">\n                                        <h4>Brubank</h4>\n                                        <p>Banco 100% digital</p>\n                                        <div class="wallet-features">\n                                            <span>‚úì Cuenta gratuita</span>\n                                            <span>‚úì Transferencias ilimitadas</span>\n                                            <span>‚úì Inversiones</span>\n                                        </div>\n                                    </div>\n                                    <div class="wallet-amount">\n                                        $${this.cartTotal.toLocaleString("es-AR")} ARS\n                                    </div>\n                                </div>\n                                \n                                <div class="wallet-option" onclick="PaymentSystem.selectWallet('lemon')">\n                                    <div class="wallet-logo">üçã</div>\n                                    <div class="wallet-info">\n                                        <h4>Lemon Cash</h4>\n                                        <p>Crypto & Fintech</p>\n                                        <div class="wallet-features">\n                                            <span>‚úì Crypto friendly</span>\n                                            <span>‚úì D√≥lar MEP</span>\n                                            <span>‚úì Staking</span>\n                                        </div>\n                                    </div>\n                                    <div class="wallet-amount">\n                                        $${this.cartTotal.toLocaleString("es-AR")} ARS\n                                    </div>\n                                </div>\n                                \n                                <div class="wallet-option" onclick="PaymentSystem.selectWallet('naranja')">\n                                    <div class="wallet-logo">üß°</div>\n                                    <div class="wallet-info">\n                                        <h4>Naranja X</h4>\n                                        <p>M√°s que una tarjeta</p>\n                                        <div class="wallet-features">\n                                            <span>‚úì Cuenta digital</span>\n                                            <span>‚úì Beneficios exclusivos</span>\n                                            <span>‚úì Cuotas sin inter√©s</span>\n                                        </div>\n                                    </div>\n                                    <div class="wallet-amount">\n                                        $${this.cartTotal.toLocaleString("es-AR")} ARS\n                                    </div>\n                                </div>\n                                \n                                <div class="wallet-option" onclick="PaymentSystem.selectWallet('modo')">\n                                    <div class="wallet-logo">üíö</div>\n                                    <div class="wallet-info">\n                                        <h4>MODO</h4>\n                                        <p>Billetera de bancos argentinos</p>\n                                        <div class="wallet-features">\n                                            <span>‚úì Respaldado por bancos</span>\n                                            <span>‚úì QR unificado</span>\n                                            <span>‚úì Sin comisiones</span>\n                                        </div>\n                                    </div>\n                                    <div class="wallet-amount">\n                                        $${this.cartTotal.toLocaleString("es-AR")} ARS\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            `,document.body.appendChild(e),this.bindWalletModalEvents(e)},selectWallet(e){const t=this.generateOrderReference(),n=this.cartTotal,a="0070999830004567890123",o={mercadopago:{deep:`mercadopago://checkout?amount=${n}&concept=Pedido Ihara & London - ${t}&receiver_id=123456789`,fallback:"https://play.google.com/store/apps/details?id=com.mercadopago.wallet",web:`https://www.mercadopago.com.ar/checkout/v1/redirect?amount=${n}&concept=Pedido%20Ihara%20%26%20London%20-%20${t}`},uala:{deep:`uala://send?cbu=${a}&amount=${n}&concept=Pedido ${t}`,fallback:"https://play.google.com/store/apps/details?id=com.uala.app",web:"https://www.uala.com.ar"},brubank:{deep:`brubank://transfer?cbu=${a}&amount=${n}&concept=Pedido ${t}`,fallback:"https://play.google.com/store/apps/details?id=ar.com.brubank.app",web:"https://brubank.com"},lemon:{deep:`lemon://send?cbu=${a}&amount=${n}&concept=Pedido ${t}`,fallback:"https://play.google.com/store/apps/details?id=ar.com.lemon.cash",web:"https://lemon.me"},naranja:{deep:`naranjax://pay?cbu=${a}&amount=${n}&concept=Pedido ${t}`,fallback:"https://play.google.com/store/apps/details?id=com.naranja.naranjax",web:"https://naranjax.com"},modo:{deep:`modo://pay?cbu=${a}&amount=${n}&concept=Pedido ${t}`,fallback:"https://play.google.com/store/apps/details?id=ar.com.modo.app",web:"https://modo.com.ar"}}[e];if(o){document.querySelector(".wallet-modal").remove(),this.showWalletInstructions(e,o,t);const n=document.createElement("a");n.href=o.deep,n.click(),setTimeout(()=>{this.showWalletFallback(e,o)},2e3)}},showWalletInstructions(e,t,n){const a=document.createElement("div");a.className="instructions-modal",a.innerHTML=`\n                <div class="modal-overlay">\n                    <div class="modal-content">\n                        <div class="modal-header">\n                            <h3>üì± Instrucciones de Pago</h3>\n                            <button class="close-modal">&times;</button>\n                        </div>\n                        <div class="modal-body">\n                            <div class="wallet-instructions">\n                                <div class="instruction-step">\n                                    <div class="step-number">1</div>\n                                    <div class="step-content">\n                                        <h4>Abrir ${this.getWalletName(e)}</h4>\n                                        <p>Si no se abri√≥ autom√°ticamente, toca el bot√≥n de abajo</p>\n                                        <button class="open-wallet-btn" onclick="PaymentSystem.openWalletDirect('${e}')">\n                                            Abrir ${this.getWalletName(e)}\n                                        </button>\n                                    </div>\n                                </div>\n                                \n                                <div class="instruction-step">\n                                    <div class="step-number">2</div>\n                                    <div class="step-content">\n                                        <h4>Datos para transferir</h4>\n                                        <div class="transfer-data">\n                                            <p><strong>CBU:</strong> 0070999830004567890123</p>\n                                            <p><strong>Alias:</strong> IHARA.LONDON.MP</p>\n                                            <p><strong>Titular:</strong> Ihara & London S.A.S</p>\n                                            <p><strong>Monto:</strong> $${this.cartTotal.toLocaleString("es-AR")} ARS</p>\n                                            <p><strong>Concepto:</strong> Pedido ${n}</p>\n                                        </div>\n                                        <button class="copy-transfer-data" onclick="PaymentSystem.copyTransferData('${n}')">\n                                            üìã Copiar Datos\n                                        </button>\n                                    </div>\n                                </div>\n                                \n                                <div class="instruction-step">\n                                    <div class="step-number">3</div>\n                                    <div class="step-content">\n                                        <h4>Confirmar pago</h4>\n                                        <p>Una vez realizada la transferencia, env√≠anos el comprobante</p>\n                                        <a href="https://wa.me/5491123456789?text=Hola! Realic√© el pago de mi pedido ${n} desde ${this.getWalletName(e)}. Adjunto comprobante." \n                                           class="whatsapp-btn" target="_blank">\n                                            üì± Enviar Comprobante\n                                        </a>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                        <div class="modal-footer">\n                            <button class="btn-secondary close-modal">Cancelar</button>\n                            <button class="btn-primary" onclick="PaymentSystem.confirmWalletPayment('${e}', '${n}')">\n                                ‚úÖ Pago Realizado\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            `,document.body.appendChild(a),this.bindModalEvents(a)},getWalletName:e=>({mercadopago:"Mercado Pago",uala:"Ual√°",brubank:"Brubank",lemon:"Lemon Cash",naranja:"Naranja X",modo:"MODO"}[e]||e),openWalletDirect(e){window.location.href=`intent://wallet#Intent;package=${{mercadopago:"com.mercadopago.wallet",uala:"com.uala.app",brubank:"ar.com.brubank.app",lemon:"ar.com.lemon.cash",naranja:"com.naranja.naranjax",modo:"ar.com.modo.app"}[e]};scheme=https;end`},copyTransferData(e){const t=`CBU: 0070999830004567890123\nAlias: IHARA.LONDON.MP\nTitular: Ihara & London S.A.S\nMonto: $${this.cartTotal.toLocaleString("es-AR")} ARS\nConcepto: Pedido ${e}`;navigator.clipboard.writeText(t).then(()=>{this.showNotification("‚úÖ Datos copiados al portapapeles")}).catch(()=>{this.showNotification("‚ùå Error al copiar. Anota los datos manualmente.")})},confirmWalletPayment(e,t){const n={reference:t,amount:this.cartTotal,items:this.cart,method:"digital_wallet",wallet:e,timestamp:(new Date).toISOString()};localStorage.setItem("pending_order",JSON.stringify(n)),document.querySelector(".instructions-modal").remove(),this.showPaymentSuccess(`‚úÖ Pago registrado con ${this.getWalletName(e)}. Te contactaremos cuando confirmemos el pago.`)},showWalletFallback(e,t){if(document.querySelector(".instructions-modal"))return;const n=document.createElement("div");n.className="wallet-fallback",n.innerHTML=`\n                <div style="position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); \n                            background: white; padding: 2rem; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.3); \n                            z-index: 10000; max-width: 400px; text-align: center;">\n                    <h3>¬øNo se abri√≥ ${this.getWalletName(e)}?</h3>\n                    <p>Puedes descargar la app o usar la versi√≥n web:</p>\n                    <div style="display: flex; gap: 1rem; justify-content: center; margin: 1rem 0;">\n                        <a href="${t.fallback}" target="_blank" class="btn-primary">\n                            üì± Descargar App\n                        </a>\n                        <a href="${t.web}" target="_blank" class="btn-secondary">\n                            üåê Versi√≥n Web\n                        </a>\n                    </div>\n                    <button onclick="this.parentElement.parentElement.remove()" class="btn-secondary" style="margin-top: 1rem;">\n                        Cerrar\n                    </button>\n                </div>\n            `,document.body.appendChild(n),setTimeout(()=>{n.parentElement&&n.remove()},8e3)},bindWalletModalEvents(e){e.querySelectorAll(".close-modal").forEach(t=>{t.addEventListener("click",()=>{e.remove()})}),e.querySelector(".modal-overlay").addEventListener("click",t=>{t.target===t.currentTarget&&e.remove()})},bindModalEvents(e){e.querySelectorAll(".close-modal").forEach(t=>{t.addEventListener("click",()=>{e.remove()})}),e.querySelector(".modal-overlay").addEventListener("click",t=>{t.target===t.currentTarget&&e.remove()})},processCrypto(){return console.log("Processing crypto payment..."),this.showCryptoOptions(),!0},showCryptoOptions(){const e=document.createElement("div");e.className="crypto-modal",e.innerHTML=`\n                <div class="modal-overlay">\n                    <div class="modal-content">\n                        <div class="modal-header">\n                            <h3>‚Çø Pago con Criptomonedas</h3>\n                            <button class="close-modal">&times;</button>\n                        </div>\n                        <div class="modal-body">\n                            <div class="crypto-discount">\n                                <p><strong>üéâ ¬°15% de descuento!</strong></p>\n                                <p>Total a pagar: <strong>$${(.85*this.cartTotal).toLocaleString("es-AR")} ARS</strong></p>\n                                <p class="crypto-equivalent">‚âà ${this.calculateCryptoAmount(.85*this.cartTotal)} USD</p>\n                            </div>\n                            \n                            <div class="crypto-currencies">\n                                <h4>Selecciona tu criptomoneda</h4>\n                                <div class="crypto-grid">\n                                    <div class="crypto-option" onclick="PaymentSystem.selectCrypto('bitcoin')">\n                                        <div class="crypto-icon">‚Çø</div>\n                                        <div class="crypto-name">Bitcoin</div>\n                                        <div class="crypto-symbol">BTC</div>\n                                        <div class="crypto-amount">${this.calculateCryptoAmount(.85*this.cartTotal,"BTC")} BTC</div>\n                                    </div>\n                                    \n                                    <div class="crypto-option" onclick="PaymentSystem.selectCrypto('ethereum')">\n                                        <div class="crypto-icon">Œû</div>\n                                        <div class="crypto-name">Ethereum</div>\n                                        <div class="crypto-symbol">ETH</div>\n                                        <div class="crypto-amount">${this.calculateCryptoAmount(.85*this.cartTotal,"ETH")} ETH</div>\n                                    </div>\n                                    \n                                    <div class="crypto-option" onclick="PaymentSystem.selectCrypto('usdt')">\n                                        <div class="crypto-icon">‚ÇÆ</div>\n                                        <div class="crypto-name">Tether</div>\n                                        <div class="crypto-symbol">USDT</div>\n                                        <div class="crypto-amount">${this.calculateCryptoAmount(.85*this.cartTotal,"USDT")} USDT</div>\n                                    </div>\n                                    \n                                    <div class="crypto-option" onclick="PaymentSystem.selectCrypto('usdc')">\n                                        <div class="crypto-icon">üíµ</div>\n                                        <div class="crypto-name">USD Coin</div>\n                                        <div class="crypto-symbol">USDC</div>\n                                        <div class="crypto-amount">${this.calculateCryptoAmount(.85*this.cartTotal,"USDC")} USDC</div>\n                                    </div>\n                                    \n                                    <div class="crypto-option" onclick="PaymentSystem.selectCrypto('dai')">\n                                        <div class="crypto-icon">‚óà</div>\n                                        <div class="crypto-name">Dai</div>\n                                        <div class="crypto-symbol">DAI</div>\n                                        <div class="crypto-amount">${this.calculateCryptoAmount(.85*this.cartTotal,"DAI")} DAI</div>\n                                    </div>\n                                    \n                                    <div class="crypto-option" onclick="PaymentSystem.selectCrypto('bnb')">\n                                        <div class="crypto-icon">üî∏</div>\n                                        <div class="crypto-name">Binance Coin</div>\n                                        <div class="crypto-symbol">BNB</div>\n                                        <div class="crypto-amount">${this.calculateCryptoAmount(.85*this.cartTotal,"BNB")} BNB</div>\n                                    </div>\n                                </div>\n                            </div>\n                            \n                            <div class="crypto-info">\n                                <h4>üí° Informaci√≥n importante</h4>\n                                <ul>\n                                    <li>Las cotizaciones se actualizan cada 5 minutos</li>\n                                    <li>Tienes 30 minutos para completar el pago</li>\n                                    <li>Env√≠a el monto exacto para evitar retrasos</li>\n                                    <li>Las transacciones son irreversibles</li>\n                                    <li>Soporte para redes: Bitcoin, Ethereum, BSC, Polygon</li>\n                                </ul>\n                            </div>\n                        </div>\n                        <div class="modal-footer">\n                            <button class="btn-secondary close-modal">Cancelar</button>\n                        </div>\n                    </div>\n                </div>\n            `,document.body.appendChild(e),this.bindModalEvents(e)},calculateCryptoAmount(e,t="USD"){const n={USD:1e3,BTC:95e3,ETH:3500,USDT:1,USDC:1,DAI:1,BNB:600},a=e/n.USD;if("USD"===t)return a.toFixed(2);const o=a/n[t];return"BTC"===t?o.toFixed(8):"ETH"===t?o.toFixed(6):o.toFixed(4)},selectCrypto(e){const t=this.generateOrderReference(),n=.85*this.cartTotal,a=this.calculateCryptoAmount(n,e.toUpperCase());document.querySelector(".crypto-modal").remove(),this.showCryptoPaymentDetails(e,a,t)},showCryptoPaymentDetails(e,t,n){const a=this.getCryptoAddress(e),o=(this.generateCryptoQR(e,a,t),document.createElement("div"));o.className="crypto-payment-modal",o.innerHTML=`\n                <div class="modal-overlay">\n                    <div class="modal-content">\n                        <div class="modal-header">\n                            <h3>${this.getCryptoIcon(e)} Pagar con ${this.getCryptoName(e)}</h3>\n                            <button class="close-modal">&times;</button>\n                        </div>\n                        <div class="modal-body">\n                            <div class="payment-timer">\n                                <div class="timer-icon">‚è∞</div>\n                                <div class="timer-text">\n                                    <strong>Tiempo restante: <span id="crypto-timer">30:00</span></strong>\n                                    <p>La cotizaci√≥n se mantiene fija durante este tiempo</p>\n                                </div>\n                            </div>\n                            \n                            <div class="crypto-payment-info">\n                                <div class="qr-section">\n                                    <h4>üì± Escanea el c√≥digo QR</h4>\n                                    <div class="qr-code">\n                                        <div class="qr-placeholder">\n                                            <div class="qr-mock">\n                                                <div class="qr-corner"></div>\n                                                <div class="qr-corner"></div>\n                                                <div class="qr-corner"></div>\n                                                <div class="qr-corner"></div>\n                                                <div class="qr-center">${e.toUpperCase()}</div>\n                                            </div>\n                                        </div>\n                                        <p class="qr-note">Usa tu wallet favorita para escanear</p>\n                                    </div>\n                                </div>\n                                \n                                <div class="manual-payment">\n                                    <h4>üíª O copia los datos manualmente</h4>\n                                    <div class="crypto-details">\n                                        <div class="detail-row">\n                                            <label>Direcci√≥n:</label>\n                                            <div class="crypto-address">\n                                                ${a}\n                                                <button class="copy-btn" onclick="PaymentSystem.copyToClipboard('${a}')">üìã</button>\n                                            </div>\n                                        </div>\n                                        \n                                        <div class="detail-row">\n                                            <label>Cantidad exacta:</label>\n                                            <div class="crypto-amount-display">\n                                                ${t} ${e.toUpperCase()}\n                                                <button class="copy-btn" onclick="PaymentSystem.copyToClipboard('${t}')">üìã</button>\n                                            </div>\n                                        </div>\n                                        \n                                        <div class="detail-row">\n                                            <label>Referencia:</label>\n                                            <div class="reference-display">\n                                                ${n}\n                                                <button class="copy-btn" onclick="PaymentSystem.copyToClipboard('${n}')">üìã</button>\n                                            </div>\n                                        </div>\n                                        \n                                        <div class="detail-row">\n                                            <label>Red:</label>\n                                            <div class="network-display">\n                                                ${this.getCryptoNetwork(e)}\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                                \n                                <div class="popular-wallets">\n                                    <h4>üîó Abrir en wallet</h4>\n                                    <div class="wallet-links">\n                                        <button class="wallet-link" onclick="PaymentSystem.openCryptoWallet('metamask', '${e}', '${a}', '${t}')">\n                                            ü¶ä MetaMask\n                                        </button>\n                                        <button class="wallet-link" onclick="PaymentSystem.openCryptoWallet('trustwallet', '${e}', '${a}', '${t}')">\n                                            üõ°Ô∏è Trust Wallet\n                                        </button>\n                                        <button class="wallet-link" onclick="PaymentSystem.openCryptoWallet('coinbase', '${e}', '${a}', '${t}')">\n                                            üîµ Coinbase\n                                        </button>\n                                        <button class="wallet-link" onclick="PaymentSystem.openCryptoWallet('binance', '${e}', '${a}', '${t}')">\n                                            üü° Binance\n                                        </button>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                        <div class="modal-footer">\n                            <button class="btn-secondary close-modal">Cancelar</button>\n                            <button class="btn-primary" onclick="PaymentSystem.confirmCryptoPayment('${e}', '${n}')">\n                                ‚úÖ Ya envi√© el pago\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            `,document.body.appendChild(o),this.bindModalEvents(o),this.startCryptoTimer()},getCryptoAddress(e){const t={bitcoin:"1A1zP1eP5QGefi2DMPTfTL5SLmv7DivfNa",ethereum:"0x742B8BFb4B4bF55e8E5A8B1f8B94Bb4B61A8B5A8",usdt:"0x742B8BFb4B4bF55e8E5A8B1f8B94Bb4B61A8B5A8",usdc:"0x742B8BFb4B4bF55e8E5A8B1f8B94Bb4B61A8B5A8",dai:"0x742B8BFb4B4bF55e8E5A8B1f8B94Bb4B61A8B5A8",bnb:"bnb1grpf0955h0ykzq3ar5nmum7y6gdfl6lxfn46h2"};return t[e]||t.bitcoin},getCryptoName:e=>({bitcoin:"Bitcoin",ethereum:"Ethereum",usdt:"Tether",usdc:"USD Coin",dai:"Dai",bnb:"Binance Coin"}[e]||e),getCryptoIcon:e=>({bitcoin:"‚Çø",ethereum:"Œû",usdt:"‚ÇÆ",usdc:"üíµ",dai:"‚óà",bnb:"üî∏"}[e]||"‚Çø"),getCryptoNetwork:e=>({bitcoin:"Bitcoin Network",ethereum:"Ethereum (ERC-20)",usdt:"Ethereum (ERC-20)",usdc:"Ethereum (ERC-20)",dai:"Ethereum (ERC-20)",bnb:"Binance Smart Chain"}[e]||"Bitcoin Network"),startCryptoTimer(){let e=1800;const t=document.getElementById("crypto-timer"),n=setInterval(()=>{const a=Math.floor(e/60),o=e%60;t.textContent=`${a.toString().padStart(2,"0")}:${o.toString().padStart(2,"0")}`,e<=0&&(clearInterval(n),this.expireCryptoPayment()),e--},1e3)},expireCryptoPayment(){const e=document.querySelector(".crypto-payment-modal");e&&(e.querySelector(".modal-body").innerHTML='\n                    <div style="text-align: center; padding: 2rem;">\n                        <div style="font-size: 4rem; margin-bottom: 1rem;">‚è∞</div>\n                        <h3>Tiempo agotado</h3>\n                        <p>El tiempo para completar el pago ha expirado. Las cotizaciones han cambiado.</p>\n                        <button class="btn-primary" onclick="PaymentSystem.restartCryptoPayment()">\n                            Reiniciar pago\n                        </button>\n                    </div>\n                ')},openCryptoWallet(e,t,n,a){const o={metamask:`https://metamask.app.link/send/${n}?value=${a}`,trustwallet:`trust://send?coin=${t}&address=${n}&amount=${a}`,coinbase:`https://go.cb-w.com/send?address=${n}&amount=${a}`,binance:`bnc://transfer?address=${n}&amount=${a}&coin=${t}`}[e];o&&window.open(o,"_blank")},confirmCryptoPayment(e,t){const n={reference:t,amount:.85*this.cartTotal,originalAmount:this.cartTotal,discount:.15,items:this.cart,method:"crypto",cryptoType:e,timestamp:(new Date).toISOString()};localStorage.setItem("pending_order",JSON.stringify(n)),document.querySelector(".crypto-payment-modal").remove(),this.showPaymentSuccess(`‚úÖ Pago con ${this.getCryptoName(e)} registrado. Verificaremos la transacci√≥n y te contactaremos pronto.`)},showPaymentError(e){const t=document.createElement("div");t.className="payment-error",t.innerHTML=`\n                <div style="background: #fee2e2; border: 1px solid #fecaca; color: #991b1b; padding: 1rem; border-radius: 8px; margin: 1rem 0;">\n                    <strong>Error:</strong> ${e}\n                </div>\n            `;const n=document.getElementById("payment-section");n&&(n.insertBefore(t,n.firstChild),setTimeout(()=>t.remove(),5e3))},showPaymentSuccess(e){const t=document.createElement("div");t.className="payment-success-notification",t.innerHTML=`\n                <div style="display: flex; align-items: center; gap: 1rem;">\n                    <span style="font-size: 2rem;">‚úÖ</span>\n                    <div>\n                        <h4 style="margin: 0; color: var(--success);">¬°Pago Exitoso!</h4>\n                        <p style="margin: 0.5rem 0 0; font-size: 0.9rem;">${e}</p>\n                    </div>\n                </div>\n            `,t.style.cssText="\n                position: fixed;\n                top: 50%;\n                left: 50%;\n                transform: translate(-50%, -50%);\n                background: white;\n                padding: 2rem;\n                border-radius: 12px;\n                box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);\n                z-index: 10000;\n                max-width: 400px;\n                width: 90%;\n            ",document.body.appendChild(t),setTimeout(()=>{document.body.removeChild(t)},3e3)}};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>e.init()):e.init(),window.PaymentSystem=e}();